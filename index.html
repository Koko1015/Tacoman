<h2>üèí 2-Player Hockey Challenge</h2>
<div id="scoreboard">
  <span id="p1Score">Player 1: 0</span> | 
  <span id="p2Score">Player 2: 0</span> | 
  <span id="timer">02:00</span>
  <br>
  <button onclick="startGame()">Start</button>
  <button onclick="pauseGame()">Pause</button>
</div>
<canvas id="hockeyGame" width="800" height="400"></canvas>

<script>
  const hockeyCanvas = document.getElementById("hockeyGame");
  const hctx = hockeyCanvas.getContext("2d");

  let puck = { x: 400, y: 200, radius: 10, vx: 0, vy: 0 };
  let players = [
    { x: 200, y: 200, radius: 15, color: "red", up: "w", down: "s", left: "a", right: "d" },
    { x: 600, y: 200, radius: 15, color: "blue", up: "i", down: "k", left: "j", right: "l" }
  ];
  let keys = {};
  let goalies = [
    { x: 20, y: 150, width: 10, height: 100, vy: 2 },
    { x: 770, y: 150, width: 10, height: 100, vy: -2 }
  ];

  let scores = [0, 0];
  let confetti = [];
  let timer = 120; // 2 minutes in seconds
  let gameRunning = false;
  let intervalId = null;

  function drawRink() {
    hctx.fillStyle = "#87ceeb";
    hctx.fillRect(0, 0, hockeyCanvas.width, hockeyCanvas.height);

    // Center line
    hctx.strokeStyle = "white";
    hctx.beginPath();
    hctx.moveTo(400, 0);
    hctx.lineTo(400, hockeyCanvas.height);
    hctx.stroke();
  }

  function drawPuck() {
    hctx.fillStyle = "black";
    hctx.beginPath();
    hctx.arc(puck.x, puck.y, puck.radius, 0, Math.PI * 2);
    hctx.fill();
  }

  function drawPlayers() {
    players.forEach(p => {
      hctx.fillStyle = p.color;
      hctx.beginPath();
      hctx.arc(p.x, p.y, p.radius, 0, Math.PI * 2);
      hctx.fill();
    });
  }

  function drawGoalies() {
    hctx.fillStyle = "gray";
    goalies.forEach(g => hctx.fillRect(g.x, g.y, g.width, g.height));
  }

  function updatePuck() {
    puck.x += puck.vx;
    puck.y += puck.vy;
    puck.vx *= 0.98;
    puck.vy *= 0.98;

    // Bounce off top/bottom walls
    if (puck.y - puck.radius < 0 || puck.y + puck.radius > hockeyCanvas.height) puck.vy *= -1;

    // Prevent puck going behind goalies
    goalies.forEach((g, i) => {
      if (i === 0 && puck.x - puck.radius < g.x + g.width) {
        if (puck.y > g.y && puck.y < g.y + g.height) {
          puck.vx *= -1; // bounce
        } else {
          scores[1]++; // Player 2 scores
          resetPuck();
          launchConfetti();
        }
      }
      if (i === 1 && puck.x + puck.radius > g.x) {
        if (puck.y > g.y && puck.y < g.y + g.height) {
          puck.vx *= -1; // bounce
        } else {
          scores[0]++; // Player 1 scores
          resetPuck();
          launchConfetti();
        }
      }
    });
  }

  function updatePlayers() {
    players.forEach(p => {
      if (keys[p.up]) p.y -= 3;
      if (keys[p.down]) p.y += 3;
      if (keys[p.left]) p.x -= 3;
      if (keys[p.right]) p.x += 3;

      // Keep players inside rink
      p.x = Math.max(p.radius, Math.min(hockeyCanvas.width - p.radius, p.x));
      p.y = Math.max(p.radius, Math.min(hockeyCanvas.height - p.radius, p.y));

      // Collision with puck
      let dx = puck.x - p.x;
      let dy = puck.y - p.y;
      let dist = Math.sqrt(dx * dx + dy * dy);
      if (dist < p.radius + puck.radius) {
        puck.vx = dx * 0.3;
        puck.vy = dy * 0.3;
      }
    });
  }

  function updateGoalies() {
    goalies.forEach(g => {
      g.y += g.vy;
      if (g.y < 0 || g.y + g.height > hockeyCanvas.height) g.vy *= -1;
    });
  }

  function resetPuck() {
    puck.x = 400;
    puck.y = 200;
    puck.vx = 0;
    puck.vy = 0;
    updateScoreboard();
  }

  function updateScoreboard() {
    document.getElementById("p1Score").textContent = `Player 1: ${scores[0]}`;
    document.getElementById("p2Score").textContent = `Player 2: ${scores[1]}`;
  }

  function drawConfetti() {
    confetti.forEach((c) => {
      hctx.fillStyle = c.color;
      hctx.fillRect(c.x, c.y, c.size, c.size);
      c.y += c.speed;
    });
    confetti = confetti.filter(c => c.y < hockeyCanvas.height);
  }

  function launchConfetti() {
    for (let i = 0; i < 100; i++) {
      confetti.push({
        x: Math.random() * hockeyCanvas.width,
        y: Math.random() * 50,
        size: Math.random() * 6 + 2,
        speed: Math.random() * 3 + 2,
        color: ["red", "blue", "yellow", "pink", "orange", "green"][Math.floor(Math.random() * 6)]
      });
    }
  }

  function updateTimer() {
    if (timer > 0) {
      timer--;
      let minutes = String(Math.floor(timer / 60)).padStart(2, "0");
      let seconds = String(timer % 60).padStart(2, "0");
      document.getElementById("timer").textContent = `${minutes}:${seconds}`;
    } else {
      pauseGame();
      alert("‚è∞ Time‚Äôs up! Final Score: " + scores[0] + " - " + scores[1]);
    }
  }

  function hockeyLoop() {
    hctx.clearRect(0, 0, hockeyCanvas.width, hockeyCanvas.height);
    drawRink();
    drawPuck();
    drawPlayers();
    drawGoalies();
    drawConfetti();
    if (gameRunning) {
      updatePuck();
      updatePlayers();
      updateGoalies();
    }
    requestAnimationFrame(hockeyLoop);
  }

  function startGame() {
    if (!gameRunning) {
      gameRunning = true;
      if (!intervalId) intervalId = setInterval(updateTimer, 1000);
    }
  }

  function pauseGame() {
    gameRunning = false;
    clearInterval(intervalId);
    intervalId = null;
  }

  window.addEventListener("keydown", e => keys[e.key.toLowerCase()] = true);
  window.addEventListener("keyup", e => keys[e.key.toLowerCase()] = false);

  hockeyLoop();
</script>
